<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <title>My Account</title>
</head>
<body>
	<div class="back-ground">
		<div class="container">
			<div class="row">
				<div class="col-md-3">
					<div class="sticky-top">
						<mat-card class ="card-class">
							
							<mat-card-header style = "color: white">
								<mat-card-title>
									{{userName}}
								</mat-card-title>
							</mat-card-header>		
								<img  [src]="profile_img_url" class="img-fluid">

								<!-- Overall Stats -->
								<mat-card class="cardbox-mini">
									<mat-card-title>
										<div class="stat-card-title">
											<strong>Overall</strong>
										</div>
									</mat-card-title>
									<mat-card-content>
										<div class="row">
											<div class="col-sm-4 col-md-3 col-lg-3">
												<div class="stat-title">KD:</div>
												<div class="stat-number" [ngClass]="{'goodStat': oa_kd > 1, 'badStat': oa_kd <= 1}">{{oa_kd}}</div>
											</div>
											<div class="col-sm-4 col-md-3 col-lg-3">
												<div class="stat-title">ADR:</div>
												<div class="stat-number" [ngClass]="{'goodStat': oa_adr >= 80, 'badStat': oa_adr < 80}">{{oa_adr}}</div>
											</div>
											<div class="col-sm-4 col-md-3 col-lg-3">
												<div class="stat-title">HSP:</div>
												<div class="stat-number" [ngClass]="{'goodStat': oa_hsp >= 30, 'badStat': oa_hsp < 30}">{{oa_hsp}}%</div>
											</div>
										</div>
									</mat-card-content>
								</mat-card>
								
								<!-- Last Match Stats -->
								<mat-card class="cardbox-mini">
									<mat-card-title>
										<div class="stat-card-title">
											<strong>Last Match</strong>
										</div>
									</mat-card-title>
									<mat-card-content>
										<div class="row">
											<div class="col-sm-4 col-md-3 col-lg-3">
												<div class="stat-title">KD:</div>
												<div [ngClass]="{'goodStat': lm_kd >= oa_kd, 'badStat': lm_kd < oa_kd}" class="stat-number">{{lm_kd}}</div>
											</div>
											<div class="col-sm-4 col-md-3 col-lg-3">
												<div class="stat-title">ADR:</div>
												<div [ngClass]="{'goodStat': lm_adr >= oa_adr, 'badStat': lm_adr < oa_adr}" class="stat-number">{{lm_adr}}</div>
											</div>
											<div class="col-sm-4 col-md-3 col-lg-3">
												<div class="stat-title">W/L:</div>
												<div [ngClass]="{'goodStat': lm_result === 'Win', 'badStat': lm_result !== 'Win'}" class="stat-number">{{lm_result}}</div>
											</div>
										</div>
									</mat-card-content>
								</mat-card>

							<!-- Steam Button -->
							<div style="display: flex;align-items: center;justify-content: center;">
								<button class="steamButton" (click)="Steamlogin()">
									<img src="../../assets/images/SteamIcon_Long.png" style="width:110%; height: 110%; margin-left: -5%; margin-top: -2%;">
								</button>
							</div>

						</mat-card>
					</div>
				</div>
				<!-- end of left -->
				<!-- right side -->
				<div class="col-md-9">
					<div class="cardbox">
						<mat-card>
							<mat-card-header style="background-color: rgba(24, 23, 23, 0.61);">
								<mat-card-title>
									<div style="float:left; width:70%">
										<h1>{{userName}}'s Inventory</h1>
									</div>
									<div style="float:right; width:30%; align-items: right;">
										<input type="text" [(ngModel)]="searchText" placeholder="Search items">
									</div>
								</mat-card-title>
							</mat-card-header>
							<mat-card-content>
								<mat-paginator [length]="filteredItems.length" 
											[pageSize]="100" 
											[pageSizeOptions]="[100, 250, 500, 1000]"
											(page)="handlePageEvent($event)">
								</mat-paginator>
								<ng-container *ngFor="let item of filteredItems | slice: (page - 1) * pageSize : page * pageSize">
									<mat-card class="itemBox" (click)="openDialog(item)">
										<mat-card-header>
											<mat-card-title style="color:white; height: 50%;">
												<h2>{{item.name}}</h2>
											</mat-card-title>
										</mat-card-header>
										<mat-card-content style="color:white">
											<p *ngIf="item.image_url != null; else elseblock1">
												<img [src]="item.image_url" style="width: 40%; height: 40%;">
											</p>
											<ng-template #elseblock1><p>
												<img src="../../assets/images/Image_not_available.png" style="width: 40%; height: 40%;">
											</p></ng-template>

											<p>Bitskins Price: ${{item.suggested_price/1000}}</p>
											<p *ngIf="item.steam_price != null; else elseblock">Steam Price: ${{item.steam_price/100}}</p>
											<ng-template #elseblock><p>Steam Price: No Steam Listings</p></ng-template>
										</mat-card-content>
									</mat-card>
								</ng-container>
							</mat-card-content>
						</mat-card>	
					</div>
				</div>
				<!--End of right side-->
			</div>
		</div>
	</div>
</body>